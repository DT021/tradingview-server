(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{121:function(e,t){},128:function(e,t,a){},129:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(57),r=a.n(c),s=(a(70),a(71),a(72),a(7)),o=a(8),i=a(14),m=a(15),u=a(18),h=a(16),d=a(6),p=a(17),b=(a(19),a(9)),E=a.n(b),v="http://104.238.145.61:7000",f=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={rows:[]},a.deleteMarket=a.deleteMarket.bind(Object(d.a)(a)),a.getData=a.getData.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"getData",value:function(){var e=this;E.a.get(v+"/api/markets").then((function(t){e.setState({rows:t.data})}))}},{key:"componentDidMount",value:function(){this.getData()}},{key:"deleteMarket",value:function(e){var t=this;window.confirm("Do you want to delete this?")&&E.a.delete("".concat(v,"/api/market?id=").concat(e)).then((function(e){t.getData()}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"create",style:{margin:"60px 0"}},l.a.createElement("table",{className:"table border"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"#"),l.a.createElement("th",{scope:"col"},"Name"),l.a.createElement("th",{scope:"col"},"Link"),l.a.createElement("th",{scope:"col"},"Iframe"),l.a.createElement("th",{scope:"col"},l.a.createElement(s.b,{to:"/create",class:"btn btn-primary btn-sm"},"Add")))),l.a.createElement("tbody",null,this.state.rows.map((function(t,a){return l.a.createElement("tr",null,l.a.createElement("th",{scope:"row"},a+1),l.a.createElement("td",null,t.name),l.a.createElement("td",null,t.link),l.a.createElement("td",null,l.a.createElement(s.b,{to:"/chart/".concat(t.name)},"Chart")),l.a.createElement("td",null,l.a.createElement("button",{onClick:function(){e.deleteMarket(t.id)},class:"btn btn-danger btn-sm"},"Remove")))})))))}}]),t}(l.a.Component);function g(){return l.a.createElement("div",null)}var k=a(33),y=a(60),w=a.n(y),N=a(61),O=a.n(N),j=(a(125),a(62)),D=a.n(j),x=(a(128),a(63)),C=a.n(x),M=a(64),S=a.n(M),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).chartRef=Object(n.createRef)(),a.getData=a.getData.bind(Object(d.a)(a)),a.state={signals:[],chartId:a.props.match.params.id,options:{zoom:{enabled:!0},xaxis:{labels:{formatter:function(e,t){return D()(1e3*e).format("MMM DD HH:mm")}}},yaxis:{opposite:!0}},plotOptions:{},series:[{data:[]}]},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"getData",value:function(){var e=this;E.a.get("http://localhost:7000/api/market?market=".concat(this.state.chartId)).then((function(t){var a=t.data.map((function(e){return[e.time,e.open,e.high,e.low,e.close]}));e.setState({series:[{data:a}]})}))}},{key:"componentDidMount",value:function(){var e=this;this.socket=w.a.connect("http://localhost:7001"),this.socket.emit("start-socket",this.state.chartId),this.socket.on("buy-signal",(function(t){t.type="buy",e.setState((function(e){return{signals:[t].concat(Object(k.a)(e.signals))}}))})),this.socket.on("sell-signal",(function(t){t.type="sell",e.setState((function(e){return{signals:[t].concat(Object(k.a)(e.signals))}}))})),this.newData=[],this.socket.on("chart-data",(function(t){var a=[t.time,t.open,t.high,t.low,t.close];e.newData.push(a)})),this.socket.on("end-chart-data",(function(){e.setState({series:[{data:e.newData}]})})),setInterval((function(){console.log("UPDATED"),e.getData()}),1e4)}},{key:"render",value:function(){return l.a.createElement("div",{className:"info"},l.a.createElement("div",{className:"chart"},l.a.createElement(O.a,{id:"chart",options:this.state.options,series:this.state.series,type:"candlestick",width:"100%",ref:this.chartRef})),l.a.createElement("div",{className:"notifications"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",null,"Buy/Sell"),l.a.createElement("th",null,"Open"),l.a.createElement("th",null,"High"),l.a.createElement("th",null,"Low"),l.a.createElement("th",null,"Close"))),l.a.createElement("tbody",null,this.state.signals.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,"buy"==e.type?l.a.createElement("img",{src:C.a}):l.a.createElement("img",{src:S.a})),l.a.createElement("td",null,e.open),l.a.createElement("td",null,e.high),l.a.createElement("td",null,e.low),l.a.createElement("td",null,e.close))}))))))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).state={name:"",link:""},a.add=a.add.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"add",value:function(e){e.preventDefault();var t={name:this.state.name,link:this.state.link};E.a.post("".concat(v,"/api/market"),t).then((function(e){alert("Added successfully")})).catch((function(e){alert(e)}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-4 offset-sm-4"},l.a.createElement("form",{className:"form",style:{margin:"50px 0"},onSubmit:this.add},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Name"),l.a.createElement("input",{type:"text",className:"form-control",name:"name",onChange:function(t){e.setState({name:t.target.value})}})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Link"),l.a.createElement("input",{type:"text",className:"form-control",name:"link",onChange:function(t){e.setState({link:t.target.value})}})),l.a.createElement("div",{className:"form-group text-center"},l.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block",value:"Add"}))))))}}]),t}(l.a.Component);function H(){return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},l.a.createElement("div",{className:"container"},l.a.createElement("a",{class:"navbar-brand",href:"#"},"Tradingview"),l.a.createElement("button",{class:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{class:"navbar-toggler-icon"})),l.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarNav"},l.a.createElement("ul",{class:"navbar-nav"},l.a.createElement("li",{class:"nav-item active"},l.a.createElement(s.b,{class:"nav-link",href:"#"},"Home ",l.a.createElement("span",{class:"sr-only"},"(current)"))),l.a.createElement("li",{class:"nav-item"},l.a.createElement(s.b,{to:"/table",class:"nav-link",href:"#"},"Table")),l.a.createElement("li",{class:"nav-item"},l.a.createElement(s.b,{to:"/create",class:"nav-link",href:"#"},"Create"))))))}var R=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,null,l.a.createElement(H,null),l.a.createElement("div",{className:"container"},l.a.createElement(o.a,{exact:!0,path:"/",component:g}),l.a.createElement(o.a,{path:"/table",component:f}),l.a.createElement(o.a,{path:"/create",component:A}),l.a.createElement(o.a,{path:"/chart/:id",component:I}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,a){e.exports=a.p+"static/media/up-arrow.00b81309.svg"},64:function(e,t,a){e.exports=a.p+"static/media/down-arrow.4254d1c6.svg"},65:function(e,t,a){e.exports=a(129)},70:function(e,t,a){},71:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},72:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.f6dd1f62.chunk.js.map